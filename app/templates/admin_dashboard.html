<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Naurisha Admin Dashboard</title>
<link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles/styles.css') }}"
    />
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    />

    <!-- Chart.js CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js" />

    <!-- Bootstrap JS and Popper.js -->
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
      crossorigin="anonymous"
    ></script>

    <style>

    </style>
  </head>

  <body>
    <div id="sidebar">
      <div class="sidebar-heading">Naurisha Groceries</div>
      <ul>
        <li><i class="fas fa-tachometer-alt"></i> Dashboard</li>
        <li class="dropdown">
          <a
            class="dropdown-toggle"
            href="#"
            role="button"
            id="productsDropdown"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
          >
            <i class="product-icon fas fa-shopping-basket"></i> Products
          </a>
          <div class="dropdown-menu" aria-labelledby="productsDropdown">
            <a class="dropdown-item" href="#">All Products</a>
            <a class="dropdown-item" href="#">Add Product</a>
          </div>
        </li>
        <li class="dropdown">
          <a
            class="dropdown-toggle"
            href="#"
            role="button"
            id="ordersDropdown"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
          >
            <i class="order-icon fas fa-shopping-cart"></i> Orders
          </a>
          <div class="dropdown-menu" aria-labelledby="ordersDropdown">
            <a class="dropdown-item" href="#">All Orders</a>
            <a class="dropdown-item" href="#">Pending Orders</a>
          </div>
        </li>

        <li class="dropdown">
          <a
            class="dropdown-toggle"
            href="#"
            role="button"
            id="ordersDropdown"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
          >
            <i class="order-icon fas fa-shopping-cart"></i> Product Categories
          </a>
          <div class="dropdown-menu" aria-labelledby="ordersDropdown">
            <a class="dropdown-item" href="#">Add Categories</a>
            <a class="dropdown-item" href="#">All Categories</a>
          </div>
        </li>

        <li class="dropdown">
          <a
            class="dropdown-toggle"
            href="#"
            role="button"
            id="ordersDropdown"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
          >
            <i class="order-icon fas fa-map-marker-alt"></i> Locations
          </a>
          <div class="dropdown-menu" aria-labelledby="ordersDropdown">
            <a class="dropdown-item" href="#">Add Location</a>
            <a class="dropdown-item" href="#">All LOcations</a>
          </div>
        </li>

        <li class="dropdown">
          <a
            class="dropdown-toggle"
            href="#"
            role="button"
            id="customersDropdown"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
          >
            <i class="customer-icon fas fa-users"></i> Customers
          </a>
          <div class="dropdown-menu" aria-labelledby="customersDropdown">
            <a class="dropdown-item" href="#">All Customers</a>
            <a class="dropdown-item" href="#">Customer Groups</a>
          </div>
        </li>
      </ul>
    </div>

    <div id="content">
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <button class="btn btn-success" id="sidebarToggle">
          <i class="fas fa-bars"></i>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item active">
              <a class="nav-link" href="#"
                ><i class="fas fa-bell"></i> Notifications</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"
                ><i class="fas fa-user"></i> Profile</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"
                ><i class="fas fa-sign-out-alt"></i> Logout</a
              >
            </li>
          </ul>
        </div>
      </nav>

      <div class="container-fluid">
        <div class="row">
          <div class="col-lg-4">
            <div class="card">
              <div class="card-header">Total Products</div>
              <div class="card-body">
                <h2>{{ admin_data.total_products }}</h2>
                <p>Active Products: {{ admin_data.active_products }}</p>
                <p>Out of Stock: {{ admin_data.out_of_stock }}</p>
              </div>
            </div>
          </div>

          <!-- Add the loop to display individual product information if needed -->
          {% for product in products %}
          <p>{{ product.name }}</p>
          <!-- Add other product information as needed -->
          {% endfor %}

          <div class="col-lg-4">
            <div class="card">
              <div class="card-header">Recent Orders</div>
              <div class="card-body">
                <ul>
                  {% for order in admin_data.recent_orders %}
                  <li>
                    Order #{{ order.id }} - Placed on {{
                    order.order_date.strftime('%Y-%m-%d') }}
                  </li>
                  {% endfor %}
                </ul>
              </div>
            </div>
          </div>
          <div class="col-lg-4">
            <div class="card">
              <div class="card-header">Customer Stats</div>
              <div class="card-body">
                <p>Total Customers: {{ admin_data.total_customers }}</p>
                <p>
                  New Customers (Last 7 Days): {{
                  admin_data.new_customers_last_7_days }}
                </p>
                <p>Returning Customers: {{ admin_data.returning_customers }}</p>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-6">
    <div class="card">
        <div class="card-header">Sales Overview</div>
        <div class="card-body">
            <img src="{{ sales_chart_image }}" alt="Sales Overview Chart" class="img-fluid">
        </div>
    </div>
    </div>

          <div class="col-lg-6">
            <div class="card">
              <div class="card-header">Top Selling Products</div>
              <div class="card-body">
                <table class="table">
                  <thead>
                    <tr>
                      <th>Product</th>
                      <th>Quantity Sold</th>
                      <th>Revenue</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for product, total_quantity_sold, total_revenue in
                    admin_data.top_selling_products %}
                    <tr>
                      <td>{{ product.brand }}</td>
                      <td>{{ total_quantity_sold }}</td>
                      <td>Ksh. {{ total_revenue }}</td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-6">
            <div class="card">
              <div class="card-header">Customer Growth</div>
              <div class="card-body">
                <canvas id="customerGrowthChart"></canvas>
              </div>
            </div>
          </div>
          <div class="col-lg-6">
            <div class="card">
              <div class="card-header">Product Categories</div>
              <div class="card-body">
                <canvas id="productCategoriesChart"></canvas>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-12">
            <div class="card">
              <div class="card-header">Order Progress</div>
              <div class="card-body">
                <div class="progress">
                  <div
                    class="progress-bar progress-bar-striped progress-bar-animated bg-success"
                    style="width: 60%"
                  >
                    60%
                  </div>
                </div>
                <p>Processing Orders: 60%</p>
                <p>Completed Orders: 40%</p>
              </div>
            </div>
          </div>
        </div>


      </div>
   
  
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
      document
        .getElementById("sidebarToggle")
        .addEventListener("click", function () {
          document.getElementById("sidebar").style.left =
            document.getElementById("sidebar").style.left === "0px"
              ? "-250px"
              : "0";
          document.getElementById("content").style.marginLeft =
            document.getElementById("content").style.marginLeft === "250px"
              ? "0"
              : "250px";
        });
 // Chart.js
      var salesCtx = document.getElementById("salesChart").getContext("2d");
      var salesChart = new Chart(salesCtx, {
        type: "line",
        data: {
          labels: [
            "Jan",
            "Feb",
            "Mar",
            "Apr",
            "May",
            "Jun",
            "Jul",
            "Aug",
            "Sep",
            "Oct",
            "Nov",
            "Dec",
          ],
          datasets: [
            {
              label: "Monthly Sales",
              data: [
                2500, 2200, 2800, 2300, 3000, 2600, 3200, 2700, 3400, 2900,
                3600, 3100,
              ],
              borderColor: "#5bc0de",
              borderWidth: 2,
              pointRadius: 5,
              pointBackgroundColor: "#5bc0de",
              fill: false,
            },
          ],
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
            },
          },
        },
      });

      var customerGrowthCtx = document
        .getElementById("customerGrowthChart")
        .getContext("2d");
      var customerGrowthChart = new Chart(customerGrowthCtx, {
        type: "line",
        data: {
          labels: [
            "Jan",
            "Feb",
            "Mar",
            "Apr",
            "May",
            "Jun",
            "Jul",
            "Aug",
            "Sep",
            "Oct",
            "Nov",
            "Dec",
          ],
          datasets: [
            {
              label: "Customer Growth",
              data: [
                800, 820, 840, 870, 900, 950, 980, 1010, 1050, 1100, 1150, 1200,
              ],
              borderColor: "#d9534f",
              borderWidth: 2,
              pointRadius: 5,
              pointBackgroundColor: "#d9534f",
              fill: false,
            },
          ],
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
            },
          },
        },
      });

      var productCategoriesCtx = document
        .getElementById("productCategoriesChart")
        .getContext("2d");
      var productCategoriesChart = new Chart(productCategoriesCtx, {
        type: "doughnut",
        data: {
          labels: [
            "Groceries",
            "Fresh Produce",
            "Beverages",
            "Snacks",
            "Frozen Foods",
          ],
          datasets: [
            {
              data: [30, 20, 15, 10, 25],
              backgroundColor: [
                "#5cb85c",
                "#f0ad4e",
                "#5bc0de",
                "#d9534f",
                "#428bca",
              ],
            },
          ],
        },
      });
 
</script>
   
  </body>
</html>
