{% extends 'base.html' %}
{% block content %}
      <div class="container-fluid">
        <div class="row">
          <div class="col-lg-4">
            <div class="card">
              <div class="card-header">Total Products</div>
              <div class="card-body">
                <h2>{{ admin_data.total_products }}</h2>
                <p>Active Products: {{ admin_data.active_products }}</p>
                <p>Out of Stock: {{ admin_data.out_of_stock }}</p>
              </div>
            </div>
          </div>

          <!-- Add the loop to display individual product information if needed -->
          {% for product in products %}
          <p>{{ product.name }}</p>
          <!-- Add other product information as needed -->
          {% endfor %}

          <div class="col-lg-4">
            <div class="card">
              <div class="card-header">Recent Orders</div>
              <div class="card-body">
                <ul>
                  {% for order in admin_data.recent_orders %}
                  <li>
                    Order #{{ order.id }} - Placed on {{
                    order.order_date.strftime('%Y-%m-%d') }}
                  </li>
                  {% endfor %}
                </ul>
              </div>
            </div>
          </div>
          <div class="col-lg-4">
            <div class="card">
              <div class="card-header">Customer Stats</div>
              <div class="card-body">
                <p>Total Customers: {{ admin_data.total_customers }}</p>
                <p>
                  New Customers (Last 7 Days): {{
                  admin_data.new_customers_last_7_days }}
                </p>
                <p>Returning Customers: {{ admin_data.returning_customers }}</p>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-6">
    <div class="card">
        <div class="card-header">Sales Overview</div>
        <div class="card-body">
            <img src="{{ sales_chart_image }}" alt="Sales Overview Chart" class="img-fluid">
        </div>
    </div>
    </div>

          <div class="col-lg-6">
            <div class="card">
              <div class="card-header">Top Selling Products</div>
              <div class="card-body">
                <table class="table">
                  <thead>
                    <tr>
                      <th>Product</th>
                      <th>Quantity Sold</th>
                      <th>Revenue</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for product, total_quantity_sold, total_revenue in
                    admin_data.top_selling_products %}
                    <tr>
                      <td>{{ product.brand }}</td>
                      <td>{{ total_quantity_sold }}</td>
                      <td>Ksh. {{ total_revenue }}</td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-6">
            <div class="card">
              <div class="card-header">Customer Growth</div>
              <div class="card-body">
                <canvas id="customerGrowthChart"></canvas>
              </div>
            </div>
          </div>
          <div class="col-lg-6">
            <div class="card">
              <div class="card-header">Product Categories</div>
              <div class="card-body">
                <canvas id="productCategoriesChart"></canvas>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-12">
            <div class="card">
              <div class="card-header">Order Progress</div>
              <div class="card-body">
                <div class="progress">
                  <div
                    class="progress-bar progress-bar-striped progress-bar-animated bg-success"
                    style="width: 60%"
                  >
                    60%
                  </div>
                </div>
                <p>Processing Orders: 60%</p>
                <p>Completed Orders: 40%</p>
              </div>
            </div>
          </div>
        </div>


      </div>
   
  
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>

 // Chart.js
      var salesCtx = document.getElementById("salesChart").getContext("2d");
      var salesChart = new Chart(salesCtx, {
        type: "line",
        data: {
          labels: [
            "Jan",
            "Feb",
            "Mar",
            "Apr",
            "May",
            "Jun",
            "Jul",
            "Aug",
            "Sep",
            "Oct",
            "Nov",
            "Dec",
          ],
          datasets: [
            {
              label: "Monthly Sales",
              data: [
                2500, 2200, 2800, 2300, 3000, 2600, 3200, 2700, 3400, 2900,
                3600, 3100,
              ],
              borderColor: "#5bc0de",
              borderWidth: 2,
              pointRadius: 5,
              pointBackgroundColor: "#5bc0de",
              fill: false,
            },
          ],
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
            },
          },
        },
      });

      var customerGrowthCtx = document
        .getElementById("customerGrowthChart")
        .getContext("2d");
      var customerGrowthChart = new Chart(customerGrowthCtx, {
        type: "line",
        data: {
          labels: [
            "Jan",
            "Feb",
            "Mar",
            "Apr",
            "May",
            "Jun",
            "Jul",
            "Aug",
            "Sep",
            "Oct",
            "Nov",
            "Dec",
          ],
          datasets: [
            {
              label: "Customer Growth",
              data: [
                800, 820, 840, 870, 900, 950, 980, 1010, 1050, 1100, 1150, 1200,
              ],
              borderColor: "#d9534f",
              borderWidth: 2,
              pointRadius: 5,
              pointBackgroundColor: "#d9534f",
              fill: false,
            },
          ],
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
            },
          },
        },
      });

      var productCategoriesCtx = document
        .getElementById("productCategoriesChart")
        .getContext("2d");
      var productCategoriesChart = new Chart(productCategoriesCtx, {
        type: "doughnut",
        data: {
          labels: [
            "Groceries",
            "Fresh Produce",
            "Beverages",
            "Snacks",
            "Frozen Foods",
          ],
          datasets: [
            {
              data: [30, 20, 15, 10, 25],
              backgroundColor: [
                "#5cb85c",
                "#f0ad4e",
                "#5bc0de",
                "#d9534f",
                "#428bca",
              ],
            },
          ],
        },
      });
 
</script>
   
 {% endblock %}
